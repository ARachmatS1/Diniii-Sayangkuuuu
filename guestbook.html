<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dan Sampailah Penutup - Magical Edition</title>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
         :root {
            --bg1: #fff6fb;
            --accent: #ff4d84;
            --muted: #6b4a55;
            --card-shadow: 0 20px 60px rgba(80, 20, 40, 0.08);
            --glass: rgba(255, 255, 255, 0.94);
        }
        
        * {
            box-sizing: border-box;
        }
        /* Floating phrase lebih dramatis */
        
        .floating-phrase {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: 28px;
            color: #fefafc;
            z-index: 15000;
            pointer-events: none;
            text-align: center;
            opacity: 0;
            text-shadow: 0 0 12px #0a0a0a, 0 0 24px #0e0e0e, 0 0 36px #070707;
        }
        /* Animasi masuk */
        
        @keyframes floatingPop {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            30% {
                transform: translate(-50%, -55%) scale(1.2);
                opacity: 1;
            }
            70% {
                transform: translate(-50%, -65%) scale(1.1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -120%) scale(1);
                opacity: 0;
            }
        }
        
        html,
        body {
            height: 100%;
            margin: 0;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
            color: #3a2026;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }
        /* Animated Gradient Background */
        
        body {
            background: linear-gradient(270deg, #ffdde1, #ee9ca7, #ffdde1, #fbc2eb);
            background-size: 800% 800%;
            animation: gradientBG 20s ease infinite;
            position: relative;
        }
        
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        .wrap {
            max-width: 1100px;
            margin: 20px auto;
            padding: 18px;
            position: relative;
            z-index: 2;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .brand {
            font-family: 'Playfair Display', serif;
            color: var(--accent);
            font-size: 20px;
            font-weight: 700;
        }
        
        .meta {
            color: var(--muted);
            font-size: 13px;
        }
        
        .layout {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 20px;
            align-items: start;
        }
        
        @media(max-width:980px) {
            .layout {
                grid-template-columns: 1fr;
            }
        }
        /* Main box */
        
        .main {
            background: var(--glass);
            border-radius: 16px;
            padding: 26px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(8px);
        }
        
        .title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            color: #552034;
            margin: 0;
            text-align: center;
        }
        
        .subtitle {
            color: var(--muted);
            text-align: center;
            max-width: 720px;
            margin: 0 8px 6px 8px;
        }
        /* Closure Box */
        
        .closure-box {
            margin-top: 14px;
            width: 100%;
            max-width: 720px;
            border-radius: 14px;
            padding: 18px;
            background: linear-gradient(180deg, #fff8fb, #fff4f7);
            border: 1px solid rgba(200, 120, 150, 0.08);
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
        }
        
        @media(max-width:600px) {
            .closure-box {
                grid-template-columns: 1fr;
            }
        }
        
        .phrase {
            background: linear-gradient(180deg, #fff, #fff7fb);
            border-radius: 12px;
            padding: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: transform .25s ease, box-shadow .25s ease;
            box-shadow: 0 10px 28px rgba(120, 40, 80, 0.04);
            user-select: none;
            position: relative;
        }
        
        .phrase:hover {
            transform: scale(1.04) rotateZ(-1deg);
            box-shadow: 0 16px 40px rgba(200, 40, 80, 0.08);
        }
        
        .phrase .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(180deg, var(--accent), #ff7db0);
            flex-shrink: 0;
        }
        
        .phrase strong {
            font-family: 'Playfair Display', serif;
            color: #5b2130;
            font-size: 16px;
        }
        
        .phrase-pop-glow {
            text-shadow: 0 0 6px #ff4d84, 0 0 12px #ff7db0, 0 0 18px #ffb3d2;
            animation: popGlow 0.6s ease forwards;
        }
        
        @keyframes popGlow {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        /* Sidebar gifts */
        
        .sidebar {
            position: relative;
        }
        
        .gifts {
            background: linear-gradient(180deg, #fff7fb, #fff2f4);
            padding: 14px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }
        
        .gifts h3 {
            margin: 0;
            font-family: 'Playfair Display', serif;
            color: #6b2232;
            font-size: 18px;
        }
        
        .gift-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .gift {
            background: linear-gradient(180deg, #fff, #fff6f9);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(200, 120, 150, 0.06);
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: transform .18s, box-shadow .18s;
        }
        
        .gift:hover {
            transform: rotateY(15deg) scale(1.05);
            box-shadow: 0 20px 50px rgba(255, 77, 132, 0.3);
        }
        
        .gift .box-icon {
            width: 46px;
            height: 46px;
            border-radius: 8px;
            background: linear-gradient(180deg, #ffd6e8, #ffb3d2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .gift .gtitle {
            font-weight: 700;
            color: #5b2030;
        }
        
        .gift .gdesc {
            font-size: 13px;
            color: var(--muted);
        }
        
        .gifts .help {
            margin-top: 12px;
            color: var(--muted);
            font-size: 13px;
        }
        /* modal */
        
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.45);
            z-index: 9999;
            padding: 18px;
        }
        
        .modal-card {
            width: 100%;
            max-width: 720px;
            background: linear-gradient(180deg, #fff8fb, #fff4f8);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 30px 80px rgba(20, 6, 18, 0.18);
            color: #3d2326;
        }
        
        .modal-card h4 {
            margin: 0 0 6px;
            font-family: 'Playfair Display', serif;
        }
        
        .modal-body {
            line-height: 1.7;
            color: #4a272b;
        }
        
        .modal-close {
            float: right;
            background: transparent;
            border: none;
            font-size: 18px;
            cursor: pointer;
        }
        
        #fxRoot {
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 15000;
        }
    </style>
</head>

<body>
    <div class="wrap" id="root">
        <header>
            <div>
                <div class="brand">Untuk Dini Sayangku, Cintaku, Istriku</div>
                <div class="meta">Terima kasih sudah hadir, sabar, dan mau jadi bagian dari hidupku</div>
            </div>
            <div class="meta">Sabtu, 18 Oktober 2025</div>
        </header>

        <div class="layout">
            <main class="main" role="main" aria-labelledby="mainTitle">
                <h2 class="title" id="mainTitle">Penutup</h2>
                <p class="subtitle">Aku menutup halaman ini dengan beberapa kata untukmu. Semoga suatu hari nanti kamu bisa merasakan hal yang sama seperti aku waktu menulisnya: cinta yang tenang, tulus, dan tak akan pernah selesai 🤍🌹</p>

                <div class="closure-box" id="closureBox" aria-hidden="false" role="list">
                    <div class="phrase" role="listitem" tabindex="0" data-text="Kamu secantik alasan aku jatuh cinta tiap hari 🤍">
                        <div class="dot"></div><strong>Kamu Cantik</strong></div>
                    <div class="phrase" role="listitem" tabindex="0" data-text="Manisnya kamu gak pernah bisa diganti sama apa pun 🍫">
                        <div class="dot"></div><strong>Kamu Manis</strong></div>
                    <div class="phrase" role="listitem" tabindex="0" data-text="Kamu kuat banget, tapi jangan lupa, aku selalu ada buat kamu 🤍">
                        <div class="dot"></div><strong>Kamu Kuat</strong></div>
                    <div class="phrase" role="listitem" tabindex="0" data-text="Kamu segalanya bagiku, bukan cuma hari ini, tapi selamanya 💫">
                        <div class="dot"></div><strong>Kamu Punyaku</strong></div>
                    <div class="phrase" role="listitem" tabindex="0" data-text="Kamu rumah terhangat yang selalu aku pulangin ❤️">
                        <div class="dot"></div><strong>Kamu Sayangku</strong></div>
                    <div class="phrase" role="listitem" tabindex="0" data-text="aku dan kamu, selamanya. I Love You Dini 🌹">
                        <div class="dot"></div><strong>Kamu Sama Aku Selamanya</strong></div>
                </div>
            </main>

            <aside class="sidebar" aria-label="Kotak pesan">
                <div class="gifts" role="navigation" aria-label="kotak pesan">
                    <h3>Kotak Pesan</h3>
                    <div class="gift-grid" id="giftGrid"></div>
                    <div class="help">Klik kotak pesan untuk membaca isinya yaaa sayangkuuu</div>
                </div>
            </aside>
        </div>

        <footer>Made with ❤️ by <strong>Rachmat</strong> for <strong>Dini</strong></footer>
    </div>

    <div id="modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle">
        <div class="modal-card" role="document">
            <button id="modalClose" class="modal-close" aria-label="Tutup">✖</button>
            <h4 id="modalTitle">Pesan</h4>
            <div id="modalBody" class="modal-body"></div>
        </div>
    </div>

    <div id="fxRoot" aria-hidden="true"></div>
    <audio id="bgm" preload="auto" loop playsinline src="assets/music/closing.mp3"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const MESSAGES = [{
                id: 'M1',
                title: 'Pesan 1',
                text: 'Selamat ulang tahun ke-20, cintaku 🥰✨ Hari ini dunia jadi sedikit lebih indah, karena dua puluh tahun lalu kamu lahir buat mewarnainya dan sekarang, buat melengkapiku 🤍'
            }, {
                id: 'M2',
                title: 'Pesan 2',
                text: 'Kamu bukan cuma seseorang yang aku cintai, sayang. Kamu adalah ketenangan di tengah hiruk-pikuk dunia, jeda di antara kalimat panjang kehidupan. Bahkan dalam diammu, aku selalu menemukan makna🌹'
            }, {
                id: 'M3',
                title: 'Pesan 3',
                text: 'Aku gak tahu masa depan kayak apa, tapi aku tahu aku pengen kamu di sana. Di tiap rencana, di tiap perjalanan, di tiap momen kecil yang nanti kita kenang bareng. Karena rumah bukan cuma tempat, tapi orang dan aku udah nemuin rumahku di kamu 🏡💫'
            }, {
                id: 'M4',
                title: 'Pesan 4',
                text: 'Dini, kamu tahu? Aku jatuh cinta bukan karena kamu sempurna, tapi karena bersamamu, dunia terasa sempurna. Aku janji, akan terus belajar mencintaimu dengan cara yang paling lembut dan jujur yang aku bisa 🤍'
            }, {
                id: 'M5',
                title: 'Pesan 5',
                text: 'Apapun yang terjadi, ingat ya sayang tujuan kita bukan cuma berjalan bareng untuk sekarang, tapi untuk selamanya. Kita udah pilih jalan ini, dan aku mau tetap menggenggam tanganmu sampai kapanpun itu 🤍❤️'
            }, {
                id: 'M6',
                title: 'Pesan 6',
                text: 'Kamu itu pantasnya disayang-sayang dekk. Mas bakal terus sayang sama adek selamanya, sampai kapanpun. Sekarang waktunya adek bahagia, dan mas di sini buat jagain kebahagiaan itu 🤍'
            }];

            const giftGrid = document.getElementById('giftGrid');
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modalBody');
            const modalTitle = document.getElementById('modalTitle');
            const modalClose = document.getElementById('modalClose');
            const closureBox = document.getElementById('closureBox');
            const fxRoot = document.getElementById('fxRoot');
            const bgm = document.getElementById('bgm');

            MESSAGES.forEach(m => {
                let el = document.createElement('div');
                el.className = 'gift';
                el.tabIndex = 0;
                el.dataset.id = m.id;
                el.innerHTML = `<div class="box-icon">✉️</div>
<div>
<div class="gtitle">${escapeHtml(m.title)}</div>
<div class="gdesc">Klik sayang</div>
</div>`;
                el.addEventListener('click', () => openMessage(m));
                el.addEventListener('keydown', e => {
                    if (e.key === 'Enter' || e.key === ' ') openMessage(m);
                });
                giftGrid.appendChild(el);
            });

            function openMessage(m) {
                modalTitle.textContent = m.title;
                modalBody.innerHTML = `<p>${escapeHtml(m.text)}</p>`;
                modal.style.display = 'flex';
                modal.setAttribute('aria-hidden', 'false');
                launchHearts(15);
                launchConfetti(20);
            }

            function closeModal() {
                modal.style.display = 'none';
                modal.setAttribute('aria-hidden', 'true');
                modalBody.innerHTML = '';
            }
            modalClose.addEventListener('click', closeModal);
            modal.addEventListener('click', e => {
                if (e.target === modal) closeModal();
            });
            document.addEventListener('keydown', e => {
                if (e.key === 'Escape') closeModal();
            });

            document.querySelectorAll('.phrase').forEach((el, i) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(8px)';
                setTimeout(() => {
                    const anim = el.animate([{
                        opacity: 0,
                        transform: 'translateY(8px)'
                    }, {
                        opacity: 1,
                        transform: 'translateY(0px)'
                    }], {
                        duration: 600,
                        easing: 'cubic-bezier(.2,.6,.2,1)'
                    });
                    anim.onfinish = () => {
                        el.style.opacity = '1';
                        el.style.transform = 'none';
                    };
                }, 220 + i * 80);

                el.addEventListener('click', () => {
                    const txt = el.dataset.text || el.innerText;
                    el.classList.remove('phrase-pop-glow');
                    void el.offsetWidth;
                    el.classList.add('phrase-pop-glow');
                    spawnFloatingWord(txt);
                    launchConfetti(14);
                    launchHearts(10);
                });
                el.addEventListener('keydown', e => {
                    if (e.key === 'Enter' || e.key === ' ') el.click();
                });
            });


            function spawnFloatingWord(text) {
                const node = document.createElement('div');
                node.className = 'floating-phrase';
                node.textContent = text;
                document.body.appendChild(node);

                // jalankan animasi dramatis
                node.style.animation = 'floatingPop 2.5s ease forwards';

                // tambahan: confetti & hearts trail dramatis
                launchConfetti(25);
                launchHearts(20);

                // hapus node setelah animasi selesai
                node.addEventListener('animationend', () => {
                    if (node.parentNode) node.parentNode.removeChild(node);
                });
            }


            function launchConfetti(count) {
                for (let i = 0; i < count; i++) {
                    const node = document.createElement('div');
                    node.style.position = 'fixed';
                    node.style.width = '6px';
                    node.style.height = '6px';
                    node.style.background = ['#ff4d84', '#ff7db0', '#ffc0d8'][Math.floor(Math.random() * 3)];
                    node.style.left = (Math.random() * window.innerWidth) + 'px';
                    node.style.top = '-10px';
                    node.style.opacity = '1';
                    node.style.borderRadius = '50%';
                    fxRoot.appendChild(node);
                    const dx = (Math.random() * 80 - 40);
                    const dy = (window.innerHeight + 20);
                    const anim = node.animate([{
                        transform: 'translate(0,0)'
                    }, {
                        transform: `translate(${dx}px,${dy}px)`
                    }], {
                        duration: 2000 + Math.random() * 800,
                        easing: 'cubic-bezier(.2,.6,.2,1)'
                    });
                    anim.onfinish = () => fxRoot.removeChild(node);
                }
            }

            function launchHearts(count) {
                for (let i = 0; i < count; i++) {
                    const node = document.createElement('div');
                    node.textContent = '❤️';
                    node.style.position = 'fixed';
                    node.style.left = (Math.random() * window.innerWidth) + 'px';
                    node.style.top = (window.innerHeight) + 'px';
                    node.style.fontSize = (14 + Math.random() * 18) + 'px';
                    node.style.opacity = '0.9';
                    node.style.pointerEvents = 'none';
                    fxRoot.appendChild(node);
                    const dx = (Math.random() * 160 - 80);
                    const dy = -(100 + Math.random() * 80);
                    const anim = node.animate([{
                        transform: 'translate(0,0)'
                    }, {
                        transform: `translate(${dx}px,${dy}px)`
                    }], {
                        duration: 1400 + Math.random() * 400,
                        easing: 'cubic-bezier(.2,.6,.2,1)'
                    });
                    anim.onfinish = () => fxRoot.removeChild(node);
                }
            }

            function escapeHtml(text) {
                return text.replace(/[&<>"']/g, c => ({
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#039;"
                }[c]));
            }

            bgm.volume = 1;
            bgm.play();
        });
    </script>

</body>

</html>